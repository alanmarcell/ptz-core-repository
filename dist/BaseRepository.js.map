{"version":3,"sources":["../dist-esnext/BaseRepository.js"],"names":["BaseRepository","db","collectionName","collection","entity","getDbCollection","replaceOne","_id","id","upsert","result","ops","Promise","resolve","query","findOne","ids","$in","find","toArray","options"],"mappings":";;;;;;;;;;;;IAAaA,c,WAAAA,c;AACT,4BAAYC,EAAZ,EAAgBC,cAAhB,EAAgC;AAAA;;AAC5B,aAAKD,EAAL,GAAUA,EAAV;AACA,aAAKC,cAAL,GAAsBA,cAAtB;AACH;;;;0CACiB;AACd,mBAAO,KAAKD,EAAL,CAAQE,UAAR,CAAmB,KAAKD,cAAxB,CAAP;AACH;;;;kFACUE,M;;;;;;;uCACc,KAAKC,eAAL,GAChBC,UADgB,CACL,EAAEC,KAAKH,OAAOI,EAAd,EADK,EACeJ,MADf,EACuB,EAAEK,QAAQ,IAAV,EADvB,C;;;AAAfC,sC;;AAENN,yCAASM,OAAOC,GAAP,CAAW,CAAX,CAAT;iEACOC,QAAQC,OAAR,CAAgBT,MAAhB,C;;;;;;;;;;;;;;;;;;gCAEHI,E,EAAI;AACR,gBAAMM,QAAQ;AACVP,qBAAKC;AADK,aAAd;AAGA,mBAAO,KAAKH,eAAL,GACFU,OADE,CACMD,KADN,CAAP;AAEH;;;iCACQE,G,EAAK;AACV,gBAAMF,QAAQ;AACVP,qBAAK;AACDU,yBAAKD;AADJ;AADK,aAAd;AAKA,mBAAO,KAAKX,eAAL,GACFa,IADE,CACGJ,KADH,EAEFK,OAFE,EAAP;AAGH;;;6BACIL,K,EAAOM,O,EAAS;AACjB,gBAAMV,SAAS,KAAKL,eAAL,GACVa,IADU,CACLJ,KADK,EACE,EADF,EACMM,OADN,EAEVD,OAFU,EAAf;AAGA,mBAAOT,MAAP;AACH;;;;;AAEL","file":"BaseRepository.js","sourcesContent":["export class BaseRepository {\n    constructor(db, collectionName) {\n        this.db = db;\n        this.collectionName = collectionName;\n    }\n    getDbCollection() {\n        return this.db.collection(this.collectionName);\n    }\n    async save(entity) {\n        const result = await this.getDbCollection()\n            .replaceOne({ _id: entity.id }, entity, { upsert: true });\n        entity = result.ops[0];\n        return Promise.resolve(entity);\n    }\n    getById(id) {\n        const query = {\n            _id: id\n        };\n        return this.getDbCollection()\n            .findOne(query);\n    }\n    getByIds(ids) {\n        const query = {\n            _id: {\n                $in: ids\n            }\n        };\n        return this.getDbCollection()\n            .find(query)\n            .toArray();\n    }\n    find(query, options) {\n        const result = this.getDbCollection()\n            .find(query, {}, options)\n            .toArray();\n        return result;\n    }\n}\n//# sourceMappingURL=BaseRepository.js.map"]}